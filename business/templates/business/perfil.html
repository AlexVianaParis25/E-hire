{% extends "global/base.html" %}
{% load static %}


{% block extra_css %}
<link rel="stylesheet" href="{% static 'global/utils_css/ver_perfil.css' %}">
{% endblock %}


{% block title %}
E-Hire - Perfil
{% endblock %}


{% block nav %}
    <a href="#" class="nav-link active" data-section="negotiations">
        Negociações
    </a>                   
{% endblock %}

{% block button_action %}
<a href="{% url 'business:nova_solicitacao' %}" class="login">Cadastrar novo serviço</a>
<a href="{% url "business:servicos" %}" class="signup">voltar</a>
<a href="{% url "business:logout" %}" class="logout">Logout</a>
{% endblock %}


{% block content %}
<main class="container">
    <section id="profile" class="section">
        <div class="dashboard-header">
            <div>
                <h1 class="dashboard-title">Perfil da Empresa</h1>
                <p class="dashboard-subtitle">Visualize e gerencie as informações do seu perfil</p>
            </div>
        </div>

        <div class="profile-container">
            <form action="" method='POST' enctype="multipart/form-data">
                {% csrf_token %}
                <div class="profile-header">
                    <div style="display: flex; align-items: center;">
                        <label for="id_picture" style="cursor: pointer;">
                            {% if user.picture %}
                                <div class="profile-avatar" id="companyInitial">
                                    <img id="profilePreview" src="{{ user.picture.url }}" alt="Foto do usuário">
                                </div>
                                <div class="camera-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="white" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                                    <circle cx="12" cy="13" r="4"/>
                                    </svg>
                                </div>
                            {% else %}
                                <div class="profile-avatar" id="companyInitial">
                                    <img  id="profilePreview" src="{% static 'global/images/icone_perfil.avif' %}" alt="Foto do usuário">
                                </div>
                                <div class="camera-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="white" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                                    <circle cx="12" cy="13" r="4"/>
                                    </svg>
                                </div>
                            {% endif %}
                        </label>
                    <input type="file" name="picture" id="id_picture" style="display: none;">
                        <div class="profile-info">
                            <div class="profile-name" id="companyNameDisplay">{{user.tradingName}}</div>
                            <div class="profile-email" id="companyEmailDisplay">{{user.companyEmail}}</div>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="editProfileBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                        </svg>
                        Editar Perfil
                    </button>
                </div>

                <div class="form-section">
                    <h3 class="section-title">Dados da Empresa</h3>

                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Razão Social</label>
                            {{form.companyName}}
                             {{form.companyName.errors}} 
                        </div>

                        <div class="form-group">
                            <label class="form-label">Nome Fantasia</label>
                            {{form.tradingName}}
                            {{form.tradingName.errors}}
                        </div>

                        <div class="form-group">
                            <label class="form-label">CNPJ</label>
                            {{form.cnpj}}
                            {{form.cnpj.errors}}
                        </div>

                        <div class="form-group">
                            <label class="form-label">Inscrição Estadual</label>
                            {{form.stateRegistration}}
                            {{form.stateRegistration.errors}}
                        </div>

                        <div class="form-group">
                            <label class="form-label">E-mail Corporativo</label>
                            {{form.companyEmail}}
                            {{form.companyEmail.errors}}
                        </div>

                        <div class="form-group">
                            <label class="form-label">Telefone</label>
                            {{form.companyPhone}}
                            {{form.companyPhone.errors}}
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="section-title">Endereço da Empresa</h3>

                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">CEP</label>
                            {{form.cep}}
                            {{form.cep.errors}}
                        </div>

                        <div class="form-group">
                            <label class="form-label">Logradouro</label>
                            {{form.address}}
                            {{form.address.errors}}
                        </div>

                        <div class="form-group">
                            <label class="form-label">Número</label>
                            {{form.number}}
                            {{form.number.errors}}
                        </div>

                        <div class="form-group">
                            <label class="form-label">Complemento</label>
                            {{form.complement}}
                            {{form.complement.errors}}
                        </div>

                        <div class="form-group">
                            <label class="form-label">Bairro</label>
                            {{form.neighborhood}}
                            {{form.neighborhood.errors}}
                        </div>

                        <div class="form-group">
                            <label class="form-label">Cidade</label>
                            {{form.city}}
                            {{form.city.errors}}
                        </div>

                        <div class="form-group">
                            <label class="form-label">Estado</label>
                            {{form.state}}
                            {{form.state.errors}}
                        </div>

                        <div class="form-group">
                            <label class="form-label">País</label>
                            {{form.country}}
                            {{form.country.erros}}
                        </div>
                    </div>
                </div>

                <div class="form-section" id="accessSection">
                    <h3 class="section-title">Alterar Senha</h3>

                    <div class="form-grid">
                        <div class="form-group">
                            {{form.password}}
                            {{form.password.errors}}
                        </div>

                        <div class="form-group">
                            {{form.confirmar_senha}}
                            {{form.confirmar_senha.errors}}
                        </div>
                    </div>
                </div>

                <div class="form-actions" id="formActions">
                    <button class="btn btn-cancel" id="cancelEditBtn">Cancelar</button>
                    <button class="btn btn-primary" id="saveProfileBtn">Salvar Alterações</button>
                </div>
            </form>
        </div>
    </section>
</main>


{% endblock content %}


{% block script %}
<script src="{% static 'global/utils_js/user_update.js' %}"></script>       
{% endblock script %}